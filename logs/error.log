{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"level":"error","message":"Error creating transaction: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sql":"INSERT INTO transactions \n            (user_id, collection_point_id, waste_type_id, quantity, unit, proof_image_url) \n         VALUES (?, ?, ?, ?, ?, ?)","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sqlState":"23000","stack":"Error: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)\n    at PromisePoolConnection.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\connection.js:47:22)\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:262:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:21.994Z"}
{"level":"error","message":"Error in createTransaction: DatabaseError is not a constructor","stack":"TypeError: DatabaseError is not a constructor\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:291:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:21.999Z"}
{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"level":"error","message":"Error creating transaction: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sql":"INSERT INTO transactions \n            (user_id, collection_point_id, waste_type_id, quantity, unit, proof_image_url) \n         VALUES (?, ?, ?, ?, ?, ?)","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sqlState":"23000","stack":"Error: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)\n    at PromisePoolConnection.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\connection.js:47:22)\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:262:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:28.709Z"}
{"level":"error","message":"Error in createTransaction: DatabaseError is not a constructor","stack":"TypeError: DatabaseError is not a constructor\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:291:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:28.711Z"}
{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"level":"error","message":"Error creating transaction: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sql":"INSERT INTO transactions \n            (user_id, collection_point_id, waste_type_id, quantity, unit, proof_image_url) \n         VALUES (?, ?, ?, ?, ?, ?)","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sqlState":"23000","stack":"Error: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)\n    at PromisePoolConnection.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\connection.js:47:22)\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:262:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:37.268Z"}
{"level":"error","message":"Error in createTransaction: DatabaseError is not a constructor","stack":"TypeError: DatabaseError is not a constructor\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:291:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:37.271Z"}
{"code":"ER_NO_REFERENCED_ROW_2","errno":1452,"level":"error","message":"Error creating transaction: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sql":"INSERT INTO transactions \n            (user_id, collection_point_id, waste_type_id, quantity, unit, proof_image_url) \n         VALUES (?, ?, ?, ?, ?, ?)","sqlMessage":"Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)","sqlState":"23000","stack":"Error: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`transactions`, CONSTRAINT `transactions_ibfk_3` FOREIGN KEY (`waste_type_id`) REFERENCES `wastetypes` (`waste_type_id`) ON DELETE SET NULL)\n    at PromisePoolConnection.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\connection.js:47:22)\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:262:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:44.770Z"}
{"level":"error","message":"Error in createTransaction: DatabaseError is not a constructor","stack":"TypeError: DatabaseError is not a constructor\n    at TransactionRepository.createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:291:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async createTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:130:27)","timestamp":"2025-04-23T11:30:44.772Z"}
{"isOperational":true,"level":"error","message":"Error getting transaction #4: Giao dịch không tồn tại","name":"NotFoundError","stack":"NotFoundError: Giao dịch không tồn tại\n    at TransactionRepository.getTransactionById (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:212:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getTransactionById (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:80:27)","status":"fail","statusCode":404,"timestamp":"2025-04-23T11:37:47.336Z"}
{"isOperational":true,"level":"error","message":"Error in getTransactionById (4): Giao dịch không tồn tại","name":"NotFoundError","stack":"NotFoundError: Giao dịch không tồn tại\n    at TransactionRepository.getTransactionById (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:212:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getTransactionById (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:80:27)","status":"fail","statusCode":404,"timestamp":"2025-04-23T11:37:47.340Z"}
{"code":"ER_WRONG_ARGUMENTS","errno":1210,"level":"error","message":"Error getting all transactions: Incorrect arguments to mysqld_stmt_execute","sql":"\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       WHERE t.status = ? ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?","sqlMessage":"Incorrect arguments to mysqld_stmt_execute","sqlState":"HY000","stack":"Error: Incorrect arguments to mysqld_stmt_execute\n    at PromisePool.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TransactionRepository.getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:69:41)\n    at getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:25:50)\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:84:5\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at exports.authenticateUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:55:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-23T11:37:59.546Z"}
{"isOperational":true,"level":"error","message":"Error in getAllTransactions: Error retrieving transactions","name":"DatabaseError","stack":"DatabaseError: Error retrieving transactions\n    at TransactionRepository.getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:91:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:25:22)","status":"error","statusCode":500,"timestamp":"2025-04-23T11:37:59.549Z"}
{"code":"ER_WRONG_ARGUMENTS","errno":1210,"level":"error","message":"Error getting all transactions: Incorrect arguments to mysqld_stmt_execute","sql":"\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       WHERE t.status = ? AND t.collection_point_id = ? AND t.waste_type_id = ? ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?","sqlMessage":"Incorrect arguments to mysqld_stmt_execute","sqlState":"HY000","stack":"Error: Incorrect arguments to mysqld_stmt_execute\n    at PromisePool.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TransactionRepository.getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:69:41)\n    at getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:25:50)\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:84:5\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at exports.authenticateUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:55:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-23T11:40:00.638Z"}
{"isOperational":true,"level":"error","message":"Error in getAllTransactions: Error retrieving transactions","name":"DatabaseError","stack":"DatabaseError: Error retrieving transactions\n    at TransactionRepository.getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:91:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:25:22)","status":"error","statusCode":500,"timestamp":"2025-04-23T11:40:00.642Z"}
{"code":"ER_WRONG_ARGUMENTS","errno":1210,"level":"error","message":"Error getting all transactions: Incorrect arguments to mysqld_stmt_execute","sql":"\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?","sqlMessage":"Incorrect arguments to mysqld_stmt_execute","sqlState":"HY000","stack":"Error: Incorrect arguments to mysqld_stmt_execute\n    at PromisePool.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TransactionRepository.getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:69:41)\n    at getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:25:50)\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:84:5\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at exports.authenticateUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:55:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-23T11:41:02.108Z"}
{"isOperational":true,"level":"error","message":"Error in getAllTransactions: Error retrieving transactions","name":"DatabaseError","stack":"DatabaseError: Error retrieving transactions\n    at TransactionRepository.getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:91:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getAllTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:25:22)","status":"error","statusCode":500,"timestamp":"2025-04-23T11:41:02.109Z"}
{"code":"ER_WRONG_ARGUMENTS","errno":1210,"level":"error","message":"Error getting user transactions: Incorrect arguments to mysqld_stmt_execute","sql":"\n        SELECT t.*, cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE t.user_id = ?\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?","sqlMessage":"Incorrect arguments to mysqld_stmt_execute","sqlState":"HY000","stack":"Error: Incorrect arguments to mysqld_stmt_execute\n    at PromisePool.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TransactionRepository.getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:147:41)\n    at getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:57:50)\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at exports.authenticateUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:55:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-23T11:41:49.291Z"}
{"isOperational":true,"level":"error","message":"Error in getUserTransactions: Error retrieving user transactions","name":"DatabaseError","stack":"DatabaseError: Error retrieving user transactions\n    at TransactionRepository.getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:191:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:57:22)","status":"error","statusCode":500,"timestamp":"2025-04-23T11:41:49.294Z"}
{"code":"ER_WRONG_ARGUMENTS","errno":1210,"level":"error","message":"Error getting user transactions: Incorrect arguments to mysqld_stmt_execute","sql":"\n        SELECT t.*, cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE t.user_id = ?\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?","sqlMessage":"Incorrect arguments to mysqld_stmt_execute","sqlState":"HY000","stack":"Error: Incorrect arguments to mysqld_stmt_execute\n    at PromisePool.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TransactionRepository.getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:147:41)\n    at getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:57:50)\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at exports.authenticateUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:55:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-23T11:42:06.031Z"}
{"isOperational":true,"level":"error","message":"Error in getUserTransactions: Error retrieving user transactions","name":"DatabaseError","stack":"DatabaseError: Error retrieving user transactions\n    at TransactionRepository.getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:191:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:57:22)","status":"error","statusCode":500,"timestamp":"2025-04-23T11:42:06.033Z"}
{"isOperational":true,"level":"error","message":"Error getting transaction #4: Giao dịch không tồn tại","name":"NotFoundError","stack":"NotFoundError: Giao dịch không tồn tại\n    at TransactionRepository.getTransactionById (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:212:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getTransactionHistory (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:244:27)","status":"fail","statusCode":404,"timestamp":"2025-04-23T11:44:02.643Z"}
{"isOperational":true,"level":"error","message":"Error in getTransactionHistory (4): Giao dịch không tồn tại","name":"NotFoundError","stack":"NotFoundError: Giao dịch không tồn tại\n    at TransactionRepository.getTransactionById (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:212:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getTransactionHistory (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:244:27)","status":"fail","statusCode":404,"timestamp":"2025-04-23T11:44:02.646Z"}
{"level":"error","message":"Error updating transaction #8: Chỉ có thể cập nhật giao dịch đang chờ xử lý","stack":"Error: Chỉ có thể cập nhật giao dịch đang chờ xử lý\n    at TransactionRepository.updateTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:322:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async updateTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:176:27)","timestamp":"2025-04-23T11:46:50.449Z"}
{"isOperational":true,"level":"error","message":"Error in updateTransaction (8): Không thể cập nhật giao dịch: Chỉ có thể cập nhật giao dịch đang chờ xử lý","name":"DatabaseError","stack":"DatabaseError: Không thể cập nhật giao dịch: Chỉ có thể cập nhật giao dịch đang chờ xử lý\n    at TransactionRepository.updateTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:378:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async updateTransaction (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:176:27)","status":"error","statusCode":500,"timestamp":"2025-04-23T11:46:50.451Z"}
{"code":"ER_WRONG_ARGUMENTS","errno":1210,"level":"error","message":"Error getting user transactions: Incorrect arguments to mysqld_stmt_execute","sql":"\n        SELECT t.*, cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE t.user_id = ?\n       AND t.status = ? AND t.transaction_date >= ? AND t.transaction_date <= ? ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?","sqlMessage":"Incorrect arguments to mysqld_stmt_execute","sqlState":"HY000","stack":"Error: Incorrect arguments to mysqld_stmt_execute\n    at PromisePool.execute (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\mysql2\\lib\\promise\\pool.js:54:22)\n    at TransactionRepository.getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:147:41)\n    at getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:57:50)\n    at Layer.handle [as handle_request] (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at exports.authenticateUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\middleware\\authMiddleware.js:55:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-23T11:50:37.171Z"}
{"isOperational":true,"level":"error","message":"Error in getUserTransactions: Error retrieving user transactions","name":"DatabaseError","stack":"DatabaseError: Error retrieving user transactions\n    at TransactionRepository.getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\transactionRepository.js:191:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getUserTransactions (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\transactionController.js:57:22)","status":"error","statusCode":500,"timestamp":"2025-04-23T11:50:37.173Z"}
{"isOperational":true,"level":"error","message":"Login error: Username hoặc mật khẩu không đúng","name":"AuthenticationError","stack":"AuthenticationError: Username hoặc mật khẩu không đúng\n    at login (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:172:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","status":"fail","statusCode":401,"timestamp":"2025-04-23T15:20:51.900Z"}
{"isOperational":true,"level":"error","message":"Login error: Username hoặc mật khẩu không đúng","name":"AuthenticationError","stack":"AuthenticationError: Username hoặc mật khẩu không đúng\n    at login (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:178:15)","status":"fail","statusCode":401,"timestamp":"2025-04-23T15:48:13.196Z"}
{"isOperational":true,"level":"error","message":"Error in createUser: Email đã tồn tại trong hệ thống","name":"DuplicateError","stack":"DuplicateError: Email đã tồn tại trong hệ thống\n    at UserRepository.createUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\userRepository.js:67:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:102:22)","status":"fail","statusCode":409,"timestamp":"2025-04-23T19:13:12.796Z"}
{"isOperational":true,"level":"error","message":"Registration error: Email đã tồn tại trong hệ thống","name":"DuplicateError","stack":"DuplicateError: Email đã tồn tại trong hệ thống\n    at UserRepository.createUser (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\repositories\\userRepository.js:67:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async register (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:102:22)","status":"fail","statusCode":409,"timestamp":"2025-04-23T19:13:12.805Z"}
{"isOperational":true,"level":"error","message":"Login error: Username hoặc mật khẩu không đúng","name":"AuthenticationError","stack":"AuthenticationError: Username hoặc mật khẩu không đúng\n    at login (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:172:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","status":"fail","statusCode":401,"timestamp":"2025-04-24T06:45:09.897Z"}
{"isOperational":true,"level":"error","message":"Login error: Username hoặc mật khẩu không đúng","name":"AuthenticationError","stack":"AuthenticationError: Username hoặc mật khẩu không đúng\n    at login (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:172:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","status":"fail","statusCode":401,"timestamp":"2025-04-24T18:42:04.260Z"}
{"isOperational":true,"level":"error","message":"Login error: Username hoặc mật khẩu không đúng","name":"AuthenticationError","stack":"AuthenticationError: Username hoặc mật khẩu không đúng\n    at login (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:172:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","status":"fail","statusCode":401,"timestamp":"2025-04-24T18:42:09.663Z"}
{"isOperational":true,"level":"error","message":"Login error: Username hoặc mật khẩu không đúng","name":"AuthenticationError","stack":"AuthenticationError: Username hoặc mật khẩu không đúng\n    at login (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:178:15)","status":"fail","statusCode":401,"timestamp":"2025-04-25T18:08:29.108Z"}
{"isOperational":true,"level":"error","message":"Login error: Username hoặc mật khẩu không đúng","name":"AuthenticationError","stack":"AuthenticationError: Username hoặc mật khẩu không đúng\n    at login (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\src\\controllers\\authController.js:178:15)","status":"fail","statusCode":401,"timestamp":"2025-04-25T18:08:31.666Z"}
2025-04-28 01:20:17 [ERROR]: Login failed
Error: Unknown column 'last_login' in 'field list'
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at login (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\authController.js:412:18)
{
  "service": "waste-management-api",
  "username": "admin",
  "errorName": "Error",
  "errorMessage": "Unknown column 'last_login' in 'field list'"
}
2025-04-28 01:20:17 [ERROR]: 400: Trường dữ liệu không tồn tại.
{
  "service": "waste-management-api",
  "url": "/api/v1/auth/login",
  "method": "POST"
}
2025-04-28 01:22:12 [ERROR]: Login failed
Error: Unknown column 'last_login' in 'field list'
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at login (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\authController.js:412:18)
{
  "service": "waste-management-api",
  "username": "admin",
  "errorName": "Error",
  "errorMessage": "Unknown column 'last_login' in 'field list'"
}
2025-04-28 01:22:12 [ERROR]: 400: Trường dữ liệu không tồn tại.
{
  "service": "waste-management-api",
  "url": "/api/v1/auth/login",
  "method": "POST"
}
2025-04-28 01:25:08 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
2025-04-28 01:25:29 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:69:41)
    at getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:50)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-04-27T18:25:29.222Z [ERROR]: Error in getAllTransactions: Error retrieving transactions
DatabaseError: Error retrieving transactions
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:91:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-04-28 01:25:29 [ERROR]: 500: Error retrieving transactions
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
2025-04-28 01:25:56 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:69:41)
    at getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:50)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-04-27T18:25:56.070Z [ERROR]: Error in getAllTransactions: Error retrieving transactions
DatabaseError: Error retrieving transactions
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:91:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-04-28 01:25:56 [ERROR]: 500: Error retrieving transactions
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
2025-04-28 01:26:00 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions/8",
  "method": "GET"
}
2025-04-28 01:26:26 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions/statistics",
  "method": "GET"
}
2025-04-27T18:26:29.565Z [ERROR]: Error getting transaction #NaN: Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-27T18:26:29.565Z [ERROR]: Error in getTransactionById (statistics): Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-28 01:26:29 [ERROR]: 404: Giao dịch không tồn tại
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions/statistics",
  "method": "GET"
}
2025-04-30 04:06:08 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:07:39 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:07:55 [ERROR]: Lỗi MySQL không xử lý được: ER_WRONG_ARGUMENTS
{
  "service": "waste-management-api",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute",
  "sql": "\n        SELECT rp.process_id, rp.transaction_id, rp.waste_type_id, \n               rp.start_date, rp.end_date, rp.status, rp.processed_quantity,\n               wt.name as waste_type_name, \n               t.user_id, u.username as user_name\n        FROM recyclingprocesses rp\n        LEFT JOIN wastetypes wt ON rp.waste_type_id = wt.waste_type_id\n        LEFT JOIN transactions t ON rp.transaction_id = t.transaction_id\n        LEFT JOIN users u ON t.user_id = u.user_id\n        WHERE 1=1\n       AND rp.status = ? ORDER BY rp.start_date DESC LIMIT ? OFFSET ?",
  "errno": 1210
}
2025-04-30 04:07:55 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling?status=completed&sort_by=start_date&sort_dir=DESC",
  "method": "GET"
}
2025-04-30 04:09:11 [ERROR]: 404: Không tìm thấy điểm thu gom với ID đã cung cấp
{
  "service": "waste-management-api",
  "url": "/api/v1/waste-types/collection-point/:collection_point_id",
  "method": "GET"
}
2025-04-30 04:13:36 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:13:46 [ERROR]: 400: Expected double-quoted property name in JSON at position 149 (line 8 column 1)
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:13:46 [ERROR]: Lỗi không xác định:
{
  "service": "waste-management-api",
  "error": {
    "expose": true,
    "statusCode": 400,
    "status": 400,
    "body": "\r\n{\r\n  \"transaction_id\": 10,\r\n  \"waste_type_id\": 6,\r\n  \"processed_quantity\": 7.25,\r\n  \"start_date\": \"2024-03-20T08:00:00Z\",\r\n  \"status\": \"pending\",\r\n}",
    "type": "entity.parse.failed",
    "message": "Expected double-quoted property name in JSON at position 149 (line 8 column 1)",
    "name": "SyntaxError",
    "stack": "SyntaxError: Expected double-quoted property name in JSON at position 149 (line 8 column 1)\n    at JSON.parse (<anonymous>)\n    at parse (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\body-parser\\lib\\types\\json.js:92:19)\n    at D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\body-parser\\lib\\read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\raw-body\\index.js:238:16)\n    at done (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (D:\\Android Studio\\do_an_tot_nghiep\\API-WasteManagementApp\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"
  }
}
2025-04-30 04:13:51 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:14:06 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:14:26 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:15:35 [ERROR]: 404: Giao dịch không tồn tại
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:16:01 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "POST"
}
2025-04-30 04:16:22 [ERROR]: 404: Giao dịch không tồn tại
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-29T21:16:38.399Z [ERROR]: Error getting transaction #4: Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-29T21:16:38.399Z [ERROR]: Error in getTransactionById (4): Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-30 04:16:38 [ERROR]: 404: Giao dịch không tồn tại
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions/4",
  "method": "GET"
}
2025-04-29T21:16:42.311Z [ERROR]: Error getting transaction #4: Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-29T21:16:42.311Z [ERROR]: Error in getTransactionById (4): Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-30 04:16:42 [ERROR]: 404: Giao dịch không tồn tại
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions/4",
  "method": "GET"
}
2025-04-30 04:17:18 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:17:27 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:17:57 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions/2/status",
  "method": "PATCH"
}
2025-04-30 04:18:36 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:19:17 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:19:23 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:19:35 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:23:00 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 04:23:56 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "POST"
}
2025-04-30 16:35:41 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling?status=completed&waste_type_id=number&from=YYYY-MM-DD&page=1&limit=10",
  "method": "GET"
}
2025-04-30 16:36:35 [ERROR]: Lỗi MySQL không xử lý được: ER_WRONG_ARGUMENTS
{
  "service": "waste-management-api",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute",
  "sql": "\n        SELECT \n          rp.process_id, \n          rp.transaction_id, \n          rp.waste_type_id, \n          rp.start_date, \n          rp.end_date, \n          rp.status, \n          rp.processed_quantity,\n          wt.name as waste_type_name,\n          wt.unit_price as waste_type_price,\n          t.user_id,\n          t.quantity as transaction_quantity,\n          u.username as user_name,\n          u.full_name as user_full_name,\n          u.phone as user_phone\n        FROM recyclingprocesses rp\n        LEFT JOIN wastetypes wt ON rp.waste_type_id = wt.waste_type_id\n        LEFT JOIN transactions t ON rp.transaction_id = t.transaction_id\n        LEFT JOIN users u ON t.user_id = u.user_id\n        WHERE 1=1\n       ORDER BY rp.start_date DESC LIMIT ? OFFSET ?",
  "errno": 1210
}
2025-04-30 16:36:35 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "GET"
}
2025-04-30 16:39:26 [ERROR]: Lỗi MySQL không xử lý được: ER_WRONG_ARGUMENTS
{
  "service": "waste-management-api",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute",
  "sql": "\n        SELECT \n          rp.process_id, \n          rp.transaction_id, \n          rp.waste_type_id, \n          rp.start_date, \n          rp.end_date, \n          rp.status, \n          rp.processed_quantity,\n          wt.name as waste_type_name,\n          wt.unit_price as waste_type_price,\n          t.user_id,\n          t.quantity as transaction_quantity,\n          u.username as user_name,\n          u.full_name as user_full_name,\n          u.phone as user_phone\n        FROM recyclingprocesses rp\n        LEFT JOIN wastetypes wt ON rp.waste_type_id = wt.waste_type_id\n        LEFT JOIN transactions t ON rp.transaction_id = t.transaction_id\n        LEFT JOIN users u ON t.user_id = u.user_id\n        WHERE 1=1\n       ORDER BY rp.start_date DESC LIMIT ? OFFSET ?",
  "errno": 1210
}
2025-04-30 16:39:26 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "GET"
}
2025-04-30 16:40:03 [ERROR]: Lỗi MySQL không xử lý được: ER_WRONG_ARGUMENTS
{
  "service": "waste-management-api",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute",
  "sql": "\n        SELECT \n          rp.process_id, \n          rp.transaction_id, \n          rp.waste_type_id, \n          rp.start_date, \n          rp.end_date, \n          rp.status, \n          rp.processed_quantity,\n          wt.name as waste_type_name,\n          wt.unit_price as waste_type_price,\n          t.user_id,\n          t.quantity as transaction_quantity,\n          u.username as user_name,\n          u.full_name as user_full_name,\n          u.phone as user_phone\n        FROM recyclingprocesses rp\n        LEFT JOIN wastetypes wt ON rp.waste_type_id = wt.waste_type_id\n        LEFT JOIN transactions t ON rp.transaction_id = t.transaction_id\n        LEFT JOIN users u ON t.user_id = u.user_id\n        WHERE 1=1\n       ORDER BY rp.start_date DESC LIMIT ? OFFSET ?",
  "errno": 1210
}
2025-04-30 16:40:03 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "GET"
}
2025-04-30 16:40:50 [ERROR]: Lỗi MySQL không xử lý được: ER_WRONG_ARGUMENTS
{
  "service": "waste-management-api",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute",
  "sql": "\n        SELECT \n          rp.process_id, \n          rp.transaction_id, \n          rp.waste_type_id, \n          rp.start_date, \n          rp.end_date, \n          rp.status, \n          rp.processed_quantity,\n          wt.name as waste_type_name,\n          wt.unit_price as waste_type_price,\n          t.user_id,\n          t.quantity as transaction_quantity,\n          u.username as user_name,\n          u.full_name as user_full_name,\n          u.phone as user_phone\n        FROM recyclingprocesses rp\n        LEFT JOIN wastetypes wt ON rp.waste_type_id = wt.waste_type_id\n        LEFT JOIN transactions t ON rp.transaction_id = t.transaction_id\n        LEFT JOIN users u ON t.user_id = u.user_id\n        WHERE 1=1\n       ORDER BY rp.start_date DESC LIMIT ? OFFSET ?",
  "errno": 1210
}
2025-04-30 16:40:50 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling",
  "method": "GET"
}
2025-04-30 16:43:16 [ERROR]: Lỗi MySQL không xử lý được: ER_WRONG_ARGUMENTS
{
  "service": "waste-management-api",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute",
  "sql": "\n        SELECT \n          rp.process_id, \n          rp.transaction_id, \n          rp.waste_type_id, \n          rp.start_date, \n          rp.end_date, \n          rp.status, \n          rp.processed_quantity,\n          wt.name as waste_type_name,\n          wt.unit_price as waste_type_price,\n          t.user_id,\n          t.quantity as transaction_quantity,\n          u.username as user_name,\n          u.full_name as user_full_name,\n          u.phone as user_phone\n        FROM recyclingprocesses rp\n        LEFT JOIN wastetypes wt ON rp.waste_type_id = wt.waste_type_id\n        LEFT JOIN transactions t ON rp.transaction_id = t.transaction_id\n        LEFT JOIN users u ON t.user_id = u.user_id\n        WHERE 1=1\n       AND rp.status = ? AND rp.waste_type_id = ? AND DATE(rp.start_date) >= ? AND DATE(rp.start_date) <= ? ORDER BY rp.start_date DESC LIMIT ? OFFSET ?",
  "errno": 1210
}
2025-04-30 16:43:16 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling?page=1&limit=10&status=completed&waste_type_id=4&from=2025-04-01&to=2025-04-30",
  "method": "GET"
}
2025-04-30 16:44:09 [ERROR]: Lỗi MySQL không xử lý được: ER_WRONG_ARGUMENTS
{
  "service": "waste-management-api",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute",
  "sql": "\n        SELECT \n          rp.process_id, \n          rp.transaction_id, \n          rp.waste_type_id, \n          rp.start_date, \n          rp.end_date, \n          rp.status, \n          rp.processed_quantity,\n          wt.name as waste_type_name,\n          wt.unit_price as waste_type_price,\n          t.user_id,\n          t.quantity as transaction_quantity,\n          u.username as user_name,\n          u.full_name as user_full_name,\n          u.phone as user_phone\n        FROM recyclingprocesses rp\n        LEFT JOIN wastetypes wt ON rp.waste_type_id = wt.waste_type_id\n        LEFT JOIN transactions t ON rp.transaction_id = t.transaction_id\n        LEFT JOIN users u ON t.user_id = u.user_id\n        WHERE 1=1\n       AND rp.status = ? AND rp.waste_type_id = ? AND DATE(rp.start_date) >= ? AND DATE(rp.start_date) <= ? ORDER BY rp.start_date DESC LIMIT ? OFFSET ?",
  "errno": 1210
}
2025-04-30 16:44:09 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling?page=1&limit=10&status=completed&waste_type_id=4&from=2025-04-01&to=2025-04-30",
  "method": "GET"
}
2025-04-30 16:46:24 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/all",
  "method": "GET"
}
2025-04-30 16:48:03 [ERROR]: Lỗi MySQL không xử lý được: ER_PARSE_ERROR
{
  "service": "waste-management-api",
  "sqlMessage": "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND status = 'completed'\n        GROUP BY YEAR(start_date), MONTH(start_date)\n  ' at line 7",
  "sql": "\n        SELECT \n          DATE_FORMAT(start_date, '%Y-%m') as period,\n          SUM(processed_quantity) as processed_quantity,\n          COUNT(*) as total_processes\n        FROM recyclingprocesses\n        \n        AND status = 'completed'\n        GROUP BY YEAR(start_date), MONTH(start_date)\n        ORDER BY period\n      ",
  "errno": 1064
}
2025-04-30 16:48:03 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/report",
  "method": "GET"
}
2025-04-30 16:51:18 [ERROR]: Lỗi MySQL không xử lý được: ER_PARSE_ERROR
{
  "service": "waste-management-api",
  "sqlMessage": "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND status = 'completed'\n        GROUP BY YEAR(start_date)\n        ORDER BY peri' at line 7",
  "sql": "\n        SELECT \n          DATE_FORMAT(start_date, '%Y') as period,\n          SUM(processed_quantity) as processed_quantity,\n          COUNT(*) as total_processes\n        FROM recyclingprocesses\n        \n        AND status = 'completed'\n        GROUP BY YEAR(start_date)\n        ORDER BY period\n      ",
  "errno": 1064
}
2025-04-30 16:51:18 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/report?from&to&period",
  "method": "GET"
}
2025-04-30 16:53:47 [ERROR]: Lỗi MySQL không xử lý được: ER_PARSE_ERROR
{
  "service": "waste-management-api",
  "sqlMessage": "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND status = 'completed'\n        GROUP BY YEAR(start_date)\n        ORDER BY peri' at line 7",
  "sql": "\n        SELECT \n          DATE_FORMAT(start_date, '%Y') as period,\n          SUM(processed_quantity) as processed_quantity,\n          COUNT(*) as total_processes\n        FROM recyclingprocesses\n        \n        AND status = 'completed'\n        GROUP BY YEAR(start_date)\n        ORDER BY period\n      ",
  "errno": 1064
}
2025-04-30 16:53:47 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/report?from&to&period",
  "method": "GET"
}
2025-04-30 16:54:07 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2024-01-01&to=2024-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 16:54:55 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2024-01-01&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 16:55:54 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 16:56:46 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 16:58:05 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/4",
  "method": "PUT"
}
2025-04-30 16:58:43 [ERROR]: 400: Dữ liệu không hợp lệ
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/4",
  "method": "PUT"
}
2025-04-30 16:59:29 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/4",
  "method": "PUT"
}
2025-04-30 17:00:05 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:00:08 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=1",
  "method": "GET"
}
2025-04-30 17:01:30 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:02:42 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:06:55 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:07:21 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=1",
  "method": "GET"
}
2025-04-30T10:11:16.781Z [ERROR]: Error getting transaction #4: Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-30T10:11:16.781Z [ERROR]: Error in getTransactionById (4): Giao dịch không tồn tại
NotFoundError: Giao dịch không tồn tại
    at TransactionRepository.getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:212:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getTransactionById (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:80:27)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-04-30 17:11:16 [ERROR]: 404: Giao dịch không tồn tại
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions/4",
  "method": "GET"
}
2025-04-30 17:11:31 [ERROR]: Lỗi MySQL không xử lý được: ER_PARSE_ERROR
{
  "service": "waste-management-api",
  "sqlMessage": "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND status = 'completed'\n        GROUP BY YEAR(start_date), MONTH(start_date)\n  ' at line 7",
  "sql": "\n        SELECT \n          DATE_FORMAT(start_date, '%Y-%m') as period,\n          SUM(processed_quantity) as processed_quantity,\n          COUNT(*) as total_processes\n        FROM recyclingprocesses\n        \n        AND status = 'completed'\n        GROUP BY YEAR(start_date), MONTH(start_date)\n        ORDER BY period\n      ",
  "errno": 1064
}
2025-04-30 17:11:31 [ERROR]: 500: Lỗi cơ sở dữ liệu. Vui lòng thử lại sau.
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/report",
  "method": "GET"
}
2025-04-30 17:12:17 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:17:53 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:19:10 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:22:36 [ERROR]: 404: Không tìm thấy quá trình tái chế
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=4",
  "method": "GET"
}
2025-04-30 17:24:58 [ERROR]: 403: Bạn không có quyền thực hiện hành động này
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=6",
  "method": "GET"
}
2025-05-01 22:55:38 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=6",
  "method": "GET"
}
2025-05-01 22:55:50 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=6",
  "method": "GET"
}
2025-05-01 22:55:56 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/statistics?from=2025-04-29&to=2025-12-31&wasteTypeId=6",
  "method": "GET"
}
2025-05-01 22:58:13 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/user/1",
  "method": "GET"
}
2025-05-01 22:58:54 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/notify/1",
  "method": "POST"
}
2025-05-01 22:59:06 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/recycling/1",
  "method": "GET"
}
2025-05-02 00:30:32 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:30:32.173Z [ERROR]: Error in getUserRewards (1): Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:30:32 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 00:31:16 [ERROR]: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`rewards`, CONSTRAINT `rewards_ibfk_2` FOREIGN KEY (`transaction_id`) REFERENCES `transactions` (`transaction_id`) ON DELETE SET NULL)
Error: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`rewards`, CONSTRAINT `rewards_ibfk_2` FOREIGN KEY (`transaction_id`) REFERENCES `transactions` (`transaction_id`) ON DELETE SET NULL)
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:232:35)
    at createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:181:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_NO_REFERENCED_ROW_2",
  "errno": 1452,
  "sql": "\n        INSERT INTO rewards (user_id, points, transaction_id)\n        VALUES (?, ?, ?)\n      ",
  "sqlState": "23000",
  "sqlMessage": "Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`rewards`, CONSTRAINT `rewards_ibfk_2` FOREIGN KEY (`transaction_id`) REFERENCES `transactions` (`transaction_id`) ON DELETE SET NULL)"
}
2025-05-01T17:31:16.462Z [ERROR]: Error in createReward: Error creating reward
DatabaseError: Error creating reward
    at RewardRepository.createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:243:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:181:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:31:16 [ERROR]: 500: Error creating reward
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards",
  "method": "POST"
}
2025-05-02 00:32:30 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:170:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          SUM(r.points) as total_points,\n          COUNT(DISTINCT r.transaction_id) as transaction_count\n        FROM rewards r\n        JOIN users u ON r.user_id = u.user_id\n        GROUP BY u.user_id\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:32:30.147Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:177:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:32:30 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings",
  "method": "GET"
}
2025-05-02 00:32:47 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:170:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          SUM(r.points) as total_points,\n          COUNT(DISTINCT r.transaction_id) as transaction_count\n        FROM rewards r\n        JOIN users u ON r.user_id = u.user_id\n        GROUP BY u.user_id\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:32:47.976Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:177:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:32:47 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings?limit=10",
  "method": "GET"
}
2025-05-02 00:33:00 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:170:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          SUM(r.points) as total_points,\n          COUNT(DISTINCT r.transaction_id) as transaction_count\n        FROM rewards r\n        JOIN users u ON r.user_id = u.user_id\n        GROUP BY u.user_id\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:33:00.097Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:177:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:33:00 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings?limit=1",
  "method": "GET"
}
2025-05-02 00:33:27 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:33:27.863Z [ERROR]: Error in getMyRewards: Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:33:27 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/my-rewards",
  "method": "GET"
}
2025-05-02 00:34:00 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/auth/me",
  "method": "GET"
}
2025-05-02 00:35:18 [ERROR]: 401: Không tìm thấy token xác thực
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/4",
  "method": "GET"
}
2025-05-02 00:36:30 [ERROR]: 401: Không tìm thấy token xác thực
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 00:36:35 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:36:35.494Z [ERROR]: Error in getUserRewards (1): Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:36:35 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 00:37:23 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:37:23.687Z [ERROR]: Error in getUserRewards (1): Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:37:23 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 00:39:33 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
2025-05-02 00:39:48 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:69:41)
    at getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:50)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:39:48.186Z [ERROR]: Error in getAllTransactions: Error retrieving transactions
DatabaseError: Error retrieving transactions
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:91:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:39:48 [ERROR]: 500: Error retrieving transactions
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
2025-05-01T17:43:38.724Z [ERROR]: Error in deleteReward (2): Không tìm thấy thông tin điểm thưởng
NotFoundError: Không tìm thấy thông tin điểm thưởng
    at RewardRepository.deleteReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:294:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async deleteReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:228:7)
{
  "service": "waste-management-api",
  "statusCode": 404,
  "status": "fail",
  "isOperational": true,
  "name": "NotFoundError"
}
2025-05-02 00:43:38 [ERROR]: 404: Không tìm thấy thông tin điểm thưởng
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/2",
  "method": "DELETE"
}
2025-05-02 00:48:06 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:170:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          SUM(r.points) as total_points,\n          COUNT(DISTINCT r.transaction_id) as transaction_count\n        FROM rewards r\n        JOIN users u ON r.user_id = u.user_id\n        GROUP BY u.user_id\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:48:06.900Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:177:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:48:06 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings",
  "method": "GET"
}
2025-05-02 00:48:24 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:170:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          SUM(r.points) as total_points,\n          COUNT(DISTINCT r.transaction_id) as transaction_count\n        FROM rewards r\n        JOIN users u ON r.user_id = u.user_id\n        GROUP BY u.user_id\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:48:24.698Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:177:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:48:24 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings",
  "method": "GET"
}
2025-05-02 00:48:38 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:170:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          SUM(r.points) as total_points,\n          COUNT(DISTINCT r.transaction_id) as transaction_count\n        FROM rewards r\n        JOIN users u ON r.user_id = u.user_id\n        GROUP BY u.user_id\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:48:38.879Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:177:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:48:38 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings?limit=10",
  "method": "GET"
}
2025-05-02 00:49:15 [ERROR]: 401: Không tìm thấy token xác thực
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/my-rewards",
  "method": "GET"
}
2025-05-02 00:49:19 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:49:19.733Z [ERROR]: Error in getMyRewards: Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:49:19 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/my-rewards",
  "method": "GET"
}
2025-05-02 00:49:49 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:49:49.850Z [ERROR]: Error in getMyRewards: Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:49:49 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/my-rewards",
  "method": "GET"
}
2025-05-02 00:50:12 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:50:12.614Z [ERROR]: Error in getMyRewards: Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getMyRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:22:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:50:12 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/my-rewards",
  "method": "GET"
}
2025-05-02 00:55:15 [ERROR]: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`rewards`, CONSTRAINT `rewards_ibfk_2` FOREIGN KEY (`transaction_id`) REFERENCES `transactions` (`transaction_id`) ON DELETE SET NULL)
Error: Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`rewards`, CONSTRAINT `rewards_ibfk_2` FOREIGN KEY (`transaction_id`) REFERENCES `transactions` (`transaction_id`) ON DELETE SET NULL)
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:232:35)
    at createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:181:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_NO_REFERENCED_ROW_2",
  "errno": 1452,
  "sql": "\n        INSERT INTO rewards (user_id, points, transaction_id)\n        VALUES (?, ?, ?)\n      ",
  "sqlState": "23000",
  "sqlMessage": "Cannot add or update a child row: a foreign key constraint fails (`quanliracthai`.`rewards`, CONSTRAINT `rewards_ibfk_2` FOREIGN KEY (`transaction_id`) REFERENCES `transactions` (`transaction_id`) ON DELETE SET NULL)"
}
2025-05-01T17:55:15.403Z [ERROR]: Error in createReward: Error creating reward
DatabaseError: Error creating reward
    at RewardRepository.createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:243:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async createReward (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:181:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:55:15 [ERROR]: 500: Error creating reward
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards",
  "method": "POST"
}
2025-05-02 00:58:19 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-01T17:58:19.035Z [ERROR]: Error in getUserRewards (1): Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 00:58:19 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 14:54:46 [ERROR]: 403: Bạn không có quyền thực hiện hành động này
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 14:54:59 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:43:36)
    at getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT r.*, t.transaction_date, wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T07:54:59.937Z [ERROR]: Error in getUserRewards (1): Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:79:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 14:54:59 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 14:55:24 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:170:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          SUM(r.points) as total_points,\n          COUNT(DISTINCT r.transaction_id) as transaction_count\n        FROM rewards r\n        JOIN users u ON r.user_id = u.user_id\n        GROUP BY u.user_id\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T07:55:24.749Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:177:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 14:55:24 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings",
  "method": "GET"
}
2025-05-02 15:00:58 [ERROR]: 404: Không tìm thấy /api/v1/rankings?limit=10 trên server này!
{
  "service": "waste-management-api",
  "url": "/api/v1/rankings?limit=10",
  "method": "GET"
}
2025-05-02 15:01:05 [ERROR]: 404: Không tìm thấy /api/v1/rankings?limit=10 trên server này!
{
  "service": "waste-management-api",
  "url": "/api/v1/rankings?limit=10",
  "method": "GET"
}
2025-05-02 15:01:28 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:174:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:47)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          COALESCE(SUM(r.points), 0) as total_points\n        FROM users u\n        LEFT JOIN rewards r ON r.user_id = u.user_id\n        GROUP BY u.user_id, u.username, u.full_name\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:01:28.885Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:179:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:24)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:01:28 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings?limit=10",
  "method": "GET"
}
2025-05-02 15:01:56 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:174:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:47)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          COALESCE(SUM(r.points), 0) as total_points\n        FROM users u\n        LEFT JOIN rewards r ON r.user_id = u.user_id\n        GROUP BY u.user_id, u.username, u.full_name\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:01:56.328Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:179:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:24)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:01:56 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings?limit=10",
  "method": "GET"
}
2025-05-02 15:02:07 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:174:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:47)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          COALESCE(SUM(r.points), 0) as total_points\n        FROM users u\n        LEFT JOIN rewards r ON r.user_id = u.user_id\n        GROUP BY u.user_id, u.username, u.full_name\n        ORDER BY total_points DESC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:02:07.712Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:179:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:24)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:02:07 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings?limit=10",
  "method": "GET"
}
2025-05-02 15:02:54 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:178:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:47)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          COALESCE(SUM(r.points), 0) as total_points,\n          COUNT(r.reward_id) as reward_count\n        FROM users u\n        LEFT JOIN rewards r ON r.user_id = u.user_id\n        GROUP BY u.user_id, u.username, u.full_name\n        ORDER BY total_points DESC, u.username ASC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:02:54.909Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:191:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:24)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:02:54 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings?limit=10",
  "method": "GET"
}
2025-05-02 15:04:22 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:178:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:47)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          COALESCE(SUM(r.points), 0) as total_points,\n          COUNT(r.reward_id) as reward_count\n        FROM users u\n        LEFT JOIN rewards r ON r.user_id = u.user_id\n        GROUP BY u.user_id, u.username, u.full_name\n        ORDER BY total_points DESC, u.username ASC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:04:22.498Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:191:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:24)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:04:22 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings",
  "method": "GET"
}
2025-05-02 15:05:06 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:178:37)
    at getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:47)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:346:12)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\index.js:280:10)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          u.user_id,\n          u.username,\n          u.full_name,\n          COALESCE(SUM(r.points), 0) as total_points,\n          COUNT(r.reward_id) as reward_count\n        FROM users u\n        LEFT JOIN rewards r ON r.user_id = u.user_id\n        GROUP BY u.user_id, u.username, u.full_name\n        ORDER BY total_points DESC, u.username ASC\n        LIMIT ?\n      ",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:05:06.055Z [ERROR]: Error in getUserRankings: Error retrieving user rankings
DatabaseError: Error retrieving user rankings
    at RewardRepository.getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:191:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRankings (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:95:24)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:05:06 [ERROR]: 500: Error retrieving user rankings
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/rankings",
  "method": "GET"
}
2025-05-02 15:10:49 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:48:36)
    at getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:45)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT \n          r.reward_id,\n          r.points,\n          r.earned_date,\n          t.transaction_date,\n          wt.name as waste_type_name\n        FROM rewards r\n        LEFT JOIN transactions t ON r.transaction_id = t.transaction_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n        WHERE r.user_id = ?\n       ORDER BY r.earned_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:10:49.791Z [ERROR]: Error in getUserRewards (1): Error retrieving user rewards
DatabaseError: Error retrieving user rewards
    at RewardRepository.getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\rewardRepository.js:84:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getUserRewards (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\rewardController.js:150:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:10:49 [ERROR]: 500: Error retrieving user rewards
{
  "service": "waste-management-api",
  "url": "/api/v1/rewards/users/1",
  "method": "GET"
}
2025-05-02 15:14:36 [ERROR]: 401: Token đã hết hạn
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
2025-05-02 15:14:46 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:69:41)
    at getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:50)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:14:46.140Z [ERROR]: Error in getAllTransactions: Error retrieving transactions
DatabaseError: Error retrieving transactions
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:91:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:14:46 [ERROR]: 500: Error retrieving transactions
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
2025-05-02 15:14:58 [ERROR]: Incorrect arguments to mysqld_stmt_execute
Error: Incorrect arguments to mysqld_stmt_execute
    at PromisePool.execute (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\mysql2\lib\promise\pool.js:54:22)
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:69:41)
    at getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:50)
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:84:5
    at Layer.handle [as handle_request] (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\node_modules\express\lib\router\route.js:149:13)
    at exports.authenticateUser (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\middleware\authMiddleware.js:55:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "service": "waste-management-api",
  "code": "ER_WRONG_ARGUMENTS",
  "errno": 1210,
  "sql": "\n        SELECT t.*, u.full_name as user_name, u.username, \n               cp.name as collection_point_name, wt.name as waste_type_name\n        FROM transactions t\n        LEFT JOIN users u ON t.user_id = u.user_id\n        LEFT JOIN collectionpoints cp ON t.collection_point_id = cp.collection_point_id\n        LEFT JOIN wastetypes wt ON t.waste_type_id = wt.waste_type_id\n       ORDER BY t.transaction_date DESC LIMIT ? OFFSET ?",
  "sqlState": "HY000",
  "sqlMessage": "Incorrect arguments to mysqld_stmt_execute"
}
2025-05-02T08:14:58.110Z [ERROR]: Error in getAllTransactions: Error retrieving transactions
DatabaseError: Error retrieving transactions
    at TransactionRepository.getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\repositories\transactionRepository.js:91:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async getAllTransactions (D:\Android Studio\do_an_tot_nghiep\API-WasteManagementApp\src\controllers\transactionController.js:25:22)
{
  "service": "waste-management-api",
  "statusCode": 500,
  "status": "error",
  "isOperational": true,
  "name": "DatabaseError"
}
2025-05-02 15:14:58 [ERROR]: 500: Error retrieving transactions
{
  "service": "waste-management-api",
  "url": "/api/v1/transactions",
  "method": "GET"
}
